"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[232],{232:(t,e,a)=>{a.r(e),a.d(e,{default:()=>C});var n=a(757),o=a.n(n);const r={name:"Modal",data:function(){return{editable:!1,data:{title:null,body:null,action:null,onCreated:null}}},created:function(){var t=this;this.$EventBus.$on("showModal",(function(e){t.data=e,$(t.$refs.modal).modal("show"),this.$nextTick((function(){null!==e.onCreated&&e.onCreated()}))})),this.$EventBus.$on("hideModal",(function(){$(t.$refs.modal).modal("hide")}))}};var s=a(900);function i(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?i(Object(a),!0).forEach((function(e){l(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function l(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}const u={name:"Contact",props:["value"],methods:{updateData:function(t,e){this.$emit("input",c(c({},this.value),{},l({},t,e)))}}};function d(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function m(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(Object(a),!0).forEach((function(e){v(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function v(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}const f={name:"Contact",props:["value"],methods:{updateData:function(t,e){this.$emit("input",m(m({},this.value),{},v({},t,e)))}}};function p(t,e,a,n,o,r,s){try{var i=t[r](s),c=i.value}catch(t){return void a(t)}i.done?e(c):Promise.resolve(c).then(n,o)}function b(t){return function(){var e=this,a=arguments;return new Promise((function(n,o){var r=t.apply(e,a);function s(t){p(r,n,o,s,i,"next",t)}function i(t){p(r,n,o,s,i,"throw",t)}s(void 0)}))}}const h={name:"ContactIndex",components:{"v-modal":(0,s.Z)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"modal",staticClass:"modal fade",attrs:{tabindex:"-1",role:"dialog","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[null!==t.data.title?a("h5",{staticClass:"modal-title"},[t._v(t._s(t.data.title))]):t._e(),t._v(" "),t._m(0)]),t._v(" "),a("div",{staticClass:"modal-body"},[t._t("default",null,{data:t.data.body,editable:t.editable})],2),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Cerrar")]),t._v(" "),null!==t.data.action?a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.data.action.fn}},[t._v(t._s(t.data.action.title))]):t._e()])])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],!1,null,"33613254",null).exports,"v-contact":(0,s.Z)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",[a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label",attrs:{for:"recipient-name"}},[t._v("Nombre:")]),t._v(" "),a("input",{staticClass:"form-control",attrs:{disabled:!t.value.editable,type:"text",id:"recipient-name"},domProps:{value:t.value.name},on:{input:function(e){return t.updateData("name",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label",attrs:{for:"message-text"}},[t._v("Número de teléfono:")]),t._v(" "),a("input",{staticClass:"form-control",attrs:{disabled:!t.value.editable,id:"message-text"},domProps:{value:t.value.phoneNumber},on:{input:function(e){return t.updateData("phoneNumber",e.target.value)}}})])])}),[],!1,null,null,null).exports,"v-confirm-delete":(0,s.Z)(f,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",[t._v("\n    "+t._s(t.value.text)+"\n")])}),[],!1,null,null,null).exports},data:function(){return{contacts:null,modalComponent:null,modalData:null}},created:function(){var t=this;return b(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$EventBus.$emit("setLoaderVisibility",!0),e.next=3,t.axios.get("api/contacts");case 3:t.contacts=e.sent.data,t.$EventBus.$emit("setLoaderVisibility",!1);case 5:case"end":return e.stop()}}),e)})))()},methods:{createContact:function(){var t=this;return b(o().mark((function e(){var a,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a={name:"",phoneNumber:""}).editable=!0,t.modalData=a,n={title:"Crear contacto",body:a,action:{title:"crear",fn:t.saveContact},onCreated:function(){t.modalComponent="v-contact"}},t.$EventBus.$emit("showModal",n);case 5:case"end":return e.stop()}}),e)})))()},showContact:function(t){var e=this;return b(o().mark((function a(){var n,r;return o().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e.$EventBus.$emit("setLoaderVisibility",!0),a.next=3,e.axios.get("api/contacts/".concat(t));case 3:(n=a.sent.data).editable=!1,e.modalData=n,r={title:"Ver contacto",body:n,action:null,onCreated:function(){e.$EventBus.$emit("setLoaderVisibility",!1),e.modalComponent="v-contact"}},e.$EventBus.$emit("showModal",r);case 8:case"end":return a.stop()}}),a)})))()},editContact:function(t){var e=this;return b(o().mark((function a(){var n,r;return o().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e.$EventBus.$emit("setLoaderVisibility",!0),a.next=3,e.axios.get("api/contacts/".concat(t));case 3:(n=a.sent.data).editable=!0,e.modalData=n,r={title:"Editar contacto",body:n,action:{title:"Guardar",fn:e.updateContact},onCreated:function(){e.$EventBus.$emit("setLoaderVisibility",!1),e.modalComponent="v-contact"}},e.$EventBus.$emit("showModal",r);case 8:case"end":return a.stop()}}),a)})))()},removeContact:function(t){var e=this;return b(o().mark((function a(){var n,r;return o().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e.$EventBus.$emit("setLoaderVisibility",!0),n={id:t,text:"¿Está seguro de borrar este registro?"},e.modalData=n,r={title:"Eliminar contacto",body:n,action:{title:"Borrar",fn:e.deleteContact},onCreated:function(){e.$EventBus.$emit("setLoaderVisibility",!1),e.modalComponent="v-confirm-delete"}},e.$EventBus.$emit("showModal",r);case 5:case"end":return a.stop()}}),a)})))()},saveContact:function(){var t=this;return b(o().mark((function e(){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={name:t.modalData.name,phoneNumber:t.modalData.phoneNumber},t.$EventBus.$emit("setLoaderVisibility",!0),t.$EventBus.$emit("hideModal"),e.next=5,t.axios.post("api/contacts",a);case 5:return e.next=7,t.axios.get("api/contacts");case 7:t.contacts=e.sent.data,t.$EventBus.$emit("setLoaderVisibility",!1);case 9:case"end":return e.stop()}}),e)})))()},updateContact:function(){var t=this;return b(o().mark((function e(){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={name:t.modalData.name,phoneNumber:t.modalData.phoneNumber},t.$EventBus.$emit("setLoaderVisibility",!0),t.$EventBus.$emit("hideModal"),e.next=5,t.axios.put("api/contacts/".concat(t.modalData.id),a);case 5:return e.next=7,t.axios.get("api/contacts");case 7:t.contacts=e.sent.data,t.$EventBus.$emit("setLoaderVisibility",!1);case 9:case"end":return e.stop()}}),e)})))()},deleteContact:function(){var t=this;return b(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$EventBus.$emit("setLoaderVisibility",!0),t.$EventBus.$emit("hideModal"),e.next=4,t.axios.delete("api/contacts/".concat(t.modalData.id));case 4:return e.next=6,t.axios.get("api/contacts");case 6:t.contacts=e.sent.data,t.$EventBus.$emit("setLoaderVisibility",!1);case 8:case"end":return e.stop()}}),e)})))()}}};const C=(0,s.Z)(h,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("table",{staticClass:"table table-bordered"},[a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("#")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Nombre")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Número")]),t._v(" "),a("th",{attrs:{scope:"col"}},[a("a",{staticClass:"btn btn-success btn-sm",on:{click:function(e){return t.createContact()}}},[a("i",{staticClass:"fa fa-add"})])])])]),t._v(" "),a("tbody",t._l(t.contacts,(function(e,n){return a("tr",{key:n},[a("th",{attrs:{scope:"row"}},[t._v(t._s(e.id))]),t._v(" "),a("td",[t._v(t._s(e.name))]),t._v(" "),a("td",[t._v(t._s(e.phoneNumber))]),t._v(" "),a("td",[a("a",{staticClass:"btn btn-primary btn-sm",on:{click:function(a){return t.showContact(e.id)}}},[a("i",{staticClass:"fa fa-eye"})]),t._v(" "),a("a",{staticClass:"btn btn-secondary btn-sm",on:{click:function(a){return t.editContact(e.id)}}},[a("i",{staticClass:"fa fa-pencil"})]),t._v(" "),a("a",{staticClass:"btn btn-danger btn-sm",on:{click:function(a){return t.removeContact(e.id)}}},[a("i",{staticClass:"fa fa-trash"})])])])})),0)]),t._v(" "),a("v-modal",[null!==t.modalComponent?a(t.modalComponent,{tag:"component",model:{value:t.modalData,callback:function(e){t.modalData=e},expression:"modalData"}}):t._e()],1)],1)}),[],!1,null,null,null).exports}}]);